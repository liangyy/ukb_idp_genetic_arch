# environment setup
source /vol/bmd/yanyul/miniconda3/etc/profile.d/conda.sh
conda activate ukb_idp

scriptpath=/vol/bmd/yanyul/GitHub/ukb_idp_genetic_arch/methods/imagexcan/run_imagexcan.py

# input files
covar=/vol/bmd/yanyul/UKB/ukb_idp_genetic_arch/data/imagexcan_covariate_round_1.parquet
pheno=/vol/bmd/yanyul/UKB/ukb_idp_genetic_arch/data/imagexcan_phenotype_round_1.parquet
idp=/vol/bmd/yanyul/UKB/ukb_idp_genetic_arch/prediction/pred_idp.gw_ridge.parquet
eur_indiv=/vol/bmd/yanyul/UKB/predicted_expression_tf2/British.txt
idp_indiv=/vol/bmd/yanyul/UKB/ukb_idp_genetic_arch/data/idp_cohort.txt
covar_yaml=covariate.yaml
pheno_yaml=phenotype_linear.yaml

# output file
outfile=/vol/bmd/yanyul/UKB/ukb_idp_genetic_arch/data/imagexcan_round_1.linear.parquet

# run
python $scriptpath \
  --phenotype_table $pheno eid \
  --covariate_table $covar eid \
  --phenotype_yaml $pheno_yaml \
  --individual_list $eur_indiv \
  --individual_list_exclude $idp_indiv \
  --covariate_yaml $covar_yaml \
  --idp_table $idp \
  --output $outfile \
  --first_30_idp \
  > run_linear.log 2>&1
  